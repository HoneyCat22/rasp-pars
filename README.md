# REA Schedule Parser & Sync

Автоматизированная система сбора, обработки и синхронизации расписания РЭУ им. Г.В. Плеханова с Google Calendar (и другими iCal-сервисами).

Проект реализует полный цикл **CI/CD**: от парсинга "сырых" данных до деплоя готовых файлов календаря через GitHub Actions.

---

## Возможности

* **Smart Parsing:** Обходит защиту сайта и собирает данные через скрытый API.
* **Deep Dive:** Умеет "проваливаться" внутрь карточек пар (через дополнительные запросы) для получения информации о подгруппах и аудиториях (например, для иностранного языка).
* **Категоризация:** Генерирует три отдельных календаря для удобной цветовой маркировки:
    * Лекции (`lectures.ics`)
    * Практика (`practice.ics`)
    * Экзамены (`exams.ics`)
* **Timezone Aware:** Корректная обработка часовых поясов (`Europe/Moscow`), исключающая сдвиги времени.
* **Serverless Automation:** Работает 24/7 без участия пользователя благодаря **GitHub Actions**.

---

## Стек технологий

* **Язык:** Python 3.11
* **Сбор данных:** `requests` (Session management, Headers spoofing), `BeautifulSoup4` (HTML parsing).
* **Обработка:** `re` (RegEx), `ics` (генерация iCalendar), `pytz` (работа с таймзонами).
* **Автоматизация (CI/CD):** GitHub Actions (YAML workflow).
* **Хостинг артефактов:** GitHub Pages.

---

## Как подключить к Google Календарю

Вам не нужно устанавливать код. Просто подпишитесь на нужные ссылки (Google Calendar -> Добавить календарь -> По URL):

1.  **Лекции:**
    `https://honeycat22.github.io/rasp-pars/lectures.ics`
2.  **Практика:**
    `https://honeycat22.github.io/rasp-pars/practice.ics`
3.  **Экзамены:**
    `https://honeycat22.github.io/rasp-pars/exams.ics`

*Расписание обновляется автоматически каждое утро.*

---

## Локальный запуск (для разработки)

Если вы хотите запустить парсер на своей машине:

1.  **Клонируйте репозиторий:**
    ```bash
    git clone [https://github.com/HoneyCat22/rasp-pars.git](https://github.com/HoneyCat22/rasp-pars.git)
    cd rasp-pars
    ```

2.  **Создайте виртуальное окружение:**
    ```bash
    python -m venv venv
    # Windows:
    venv\Scripts\activate
    # Mac/Linux:
    source venv/bin/activate
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Запустите скрипт:**
    ```bash
    python main.py
    ```
    *В папке появятся файлы `.ics`, которые можно открыть локально.*

---

## Архитектура проекта

Проект построен по принципу разделения ответственности (Separation of Concerns):

* `main.py`: Точка входа. Управляет циклом сбора данных за несколько недель.
* `parser.py`: Слой работы с сетью. Эмулирует браузер, управляет сессией и запросами к API.
* `logic.py`: Слой бизнес-логики. Парсит HTML, извлекает данные, обрабатывает сложные кейсы (подгруппы).
* `calendar_creator.py`: Слой представления. Конвертирует обработанные данные в формат iCalendar.
* `.github/workflows/update_schedule.yml`: Инструкция для CI/CD пайплайна.

---

## Статус автоматизации

Скрипт запускается по расписанию (cron) каждый день в 08:00 (UTC+3) на серверах GitHub.
Если расписание на сайте вуза изменится, изменения автоматически "прилетят" в ваш календарь в течение суток.

---

**Автор:** [HoneyCat22](https://github.com/HoneyCat22)
